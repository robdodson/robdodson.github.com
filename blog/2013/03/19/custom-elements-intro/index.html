
<!DOCTYPE HTML>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<meta charset="utf-8">
	<title>Introduction to Custom Elements | Rob Dodson talks internets</title>

	<meta name="author" content="Rob Dodson">
	
	<meta name="description" content="Hi I'm Rob Dodson. A freelance developer specializing in JavaScript and Backbone.js with a touch of Node and Ruby.">

	<meta name="HandheldFriendly" content="True" />
	<meta name="MobileOptimized" content="320" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<link href="/atom.xml" rel="alternate" title="Rob Dodson talks internets" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic|Open+Sans:700,400" />
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>

<body class="post-template">
  <main class="content" role="main"><article class="post">
  
	<header class="post-header">
		<a id="blog-logo" href="/">Rob Dodson talks internets</a>
	</header>
	<span class="post-meta">19 Mar 2013</span>
	<h1 class="post-title">Introduction to Custom Elements</h1>
	<section class="post-content">
		<p><a href="http://robdodson.me/blog/2013/03/17/why-web-components/">In yesterday&#8217;s post</a> I made the case for Web Components so today let&#8217;s dive back in and look at Custom Elements.</p>

<!--more-->


<h2><em>This post is pretty out of date. Unfortunately the &lt;element&gt; syntax is not supported in any browser. Take a look at the <a href="http://www.html5rocks.com/en/tutorials/webcomponents/customelements/">HTML5Rocks post on custom elements</a> to learn how to create your own tags.</em></h2>

<h2>So, what are Custom Elements?</h2>

<p>The <a href="https://dvcs.w3.org/hg/webcomponents/raw-file/tip/explainer/index.html">W3C Introduction to Web Components</a> defines Custom Elements as follows:</p>

<blockquote><p>custom elements let authors define their own elements, including new presentation and API, that can be used in HTML documents</p></blockquote>

<p>To translate that a little bit, consider that every HTML tag inherits from <a href="https://developer.mozilla.org/en-US/docs/DOM/HTMLElement">HTMLElement</a>. Often in the W3C specs they&#8217;ll shorthand that and refer to items in the DOM as just &#8220;element&#8221; or &#8220;elements&#8221;. So what this is basically saying is that the custom elements spec lets you define <em>new</em> HTMLElements, which is kind of like saying you get to define new HTML tags. Technically it has always been possible to create your own HTML tags by shimming the browser, this is in fact how <a href="need%20link">HTML5shim</a> makes legacy browsers recognize HTML5 tags, but these tags weren&#8217;t really first class citizens. Which is to say, they <em>could</em> work as containers but if they needed to do anything else like spit out some custom DOM (think the <code>&lt;video&gt;</code> tag or an <code>&lt;input&gt;</code> field) then that wasn&#8217;t going to just magically happen. You&#8217;d have to write some custom javascript for that and somehow trigger it on the page.</p>

<p>Custom elements solves these issues by letting you define new markup which can then have a whole lifecycle of events, unique styles that are only scope to the element and additional (hidden) HTML markup.</p>

<h2>Defining a new Custom Element</h2>

<p>It&#8217;s probably easier to grok all of this if you just see some example code. Let&#8217;s look at the proposed markup for defining a new custom element.</p>

<figure class='code'><figcaption><span></span></figcaption><pre><code><span class="nt">&lt;element</span> <span class="na">extends=</span><span class="s">&quot;button&quot;</span> <span class="na">name=</span><span class="s">&quot;x-dropdown-button&quot;</span><span class="nt">&gt;</span>
  …
<span class="nt">&lt;/element&gt;</span>
</code></pre></figure>


<p>The W3C definition of this is painfully muddled:</p>

<p>&#8220;The element element defines a custom element. It specifies the type of element it&#8217;s a refinement of using the extends attribute.&#8221;</p>

<p>To translate, you create an element tag, give it a unique identifier with <code>name</code> and specify which tag you&#8217;re extending. All custom elements <em>must</em> extend an existing tag and ideally it should be a tag that they closely relate to. In this case we&#8217;re creating a new custom element called <code>x-dropdown-button</code> which extends <code>&lt;button&gt;</code>. The docs suggest that if you don&#8217;t have a closely related tag that you should just extend <code>&lt;div&gt;</code> or <code>&lt;span&gt;</code> since (at a minimum) you know that your element is related to a container of some sort. As a fallback legacy browsers will then use the original tag and at least render something that is close to your intent. Maybe IE8 won&#8217;t get a <code>x-dropdown-button</code> but at least it&#8217;ll get a <code>button</code>.</p>

<h2>Defining Custom Elements with Templates</h2>

<p>If you recall I said that Custom Elements can define additional markup, similar to the <code>&lt;video&gt;</code> tag or an <code>&lt;input&gt;</code> field. This markup is specified through the use of a <code>&lt;template&gt;</code> tag. For example:</p>

<figure class='code'><figcaption><span></span></figcaption><pre><code><span class="nt">&lt;element</span> <span class="na">extends=</span><span class="s">&quot;button&quot;</span> <span class="na">name=</span><span class="s">&quot;x-dropdown-button&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;template&gt;</span>
    <span class="nt">&lt;content&gt;&lt;/content&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;dropdown&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">&quot;dropdown-menu&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">tabindex=</span><span class="s">&quot;-1&quot;</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Action<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
        <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">tabindex=</span><span class="s">&quot;-1&quot;</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Another action<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
        <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">tabindex=</span><span class="s">&quot;-1&quot;</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Something else here<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
      <span class="nt">&lt;/ul&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/template&gt;</span>
<span class="nt">&lt;/element&gt;</span>
</code></pre></figure>


<p>If a custom element includes a template then it will be cloned into that element&#8217;s <strong>shadow DOM</strong> when the browser parses the tag. We haven&#8217;t talked much about shadow DOM yet but for now just think of it as markup that&#8217;s <em>rendered</em> on the page but not inspectable by the client.</p>

<p>Any content that would normally live inside of the extended tag ends up inside of the <code>&lt;content&gt;</code> tag in the template. For instance if we extended <code>&lt;button&gt;Hello World&lt;/button&gt;</code> then &#8220;Hello World&#8221; would end up in the <code>&lt;content&gt;</code> tag.</p>

<p>In addition to markup the template can include styles that are scoped only to the custom element. Here&#8217;s the same example from above with the addition of a scoped style tag.</p>

<figure class='code'><figcaption><span></span></figcaption><pre><code><span class="nt">&lt;element</span> <span class="na">extends=</span><span class="s">&quot;button&quot;</span> <span class="na">name=</span><span class="s">&quot;x-dropdown-button&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;template&gt;</span>
    <span class="nt">&lt;style </span><span class="na">scoped</span><span class="nt">&gt;</span>
      <span class="nc">.dropdown-menu</span> <span class="p">{</span>
        <span class="k">font-size</span><span class="o">:</span> <span class="m">12px</span><span class="p">;</span>
        <span class="k">color</span><span class="o">:</span> <span class="m">#CCC</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="nt">&lt;/style&gt;</span>
    <span class="nt">&lt;content&gt;&lt;/content&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;dropdown&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">&quot;dropdown-menu&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">tabindex=</span><span class="s">&quot;-1&quot;</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Action<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
        <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">tabindex=</span><span class="s">&quot;-1&quot;</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Another action<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
        <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">tabindex=</span><span class="s">&quot;-1&quot;</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Something else here<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
      <span class="nt">&lt;/ul&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/template&gt;</span>
<span class="nt">&lt;/element&gt;</span>
</code></pre></figure>


<p>The CSS used in the scoped style tag will not affect anything else on the page so you can have your own <code>.dropdown-menu</code> classes and they won&#8217;t conflict with the component. The component author <em>can</em> expose style hooks for the consumer to alter the appearance of the element through the use of the new <code>pseudo</code> attribute.</p>

<figure class='code'><figcaption><span></span></figcaption><pre><code><span class="nt">&lt;element</span> <span class="na">extends=</span><span class="s">&quot;button&quot;</span> <span class="na">name=</span><span class="s">&quot;x-dropdown-button&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;template&gt;</span>
    <span class="nt">&lt;style </span><span class="na">scoped</span><span class="nt">&gt;</span>
      <span class="nc">.dropdown-menu</span> <span class="p">{</span>
        <span class="k">font-size</span><span class="o">:</span> <span class="m">12px</span><span class="p">;</span>
        <span class="k">color</span><span class="o">:</span> <span class="m">#CCC</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="nt">&lt;/style&gt;</span>
    <span class="nt">&lt;content&gt;&lt;/content&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;dropdown&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">&quot;dropdown-menu&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;li</span> <span class="na">pseudo=</span><span class="s">&quot;x-dropdown-item&quot;</span><span class="nt">&gt;&lt;a</span> <span class="na">tabindex=</span><span class="s">&quot;-1&quot;</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Action<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
        <span class="nt">&lt;li</span> <span class="na">pseudo=</span><span class="s">&quot;x-dropdown-item&quot;</span><span class="nt">&gt;&lt;a</span> <span class="na">tabindex=</span><span class="s">&quot;-1&quot;</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Another action<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
        <span class="nt">&lt;li</span> <span class="na">pseudo=</span><span class="s">&quot;x-dropdown-item&quot;</span><span class="nt">&gt;&lt;a</span> <span class="na">tabindex=</span><span class="s">&quot;-1&quot;</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Something else here<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
      <span class="nt">&lt;/ul&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/template&gt;</span>
<span class="nt">&lt;/element&gt;</span>
</code></pre></figure>


<p>elsewhere in a style.css you could say:</p>

<figure class='code'><figcaption><span></span></figcaption><pre><code><span class="nt">x-dropdown-button</span><span class="o">:</span><span class="nd">:x-dropdown-item</span> <span class="p">{</span>
  <span class="k">background-color</span><span class="o">:</span> <span class="nb">blue</span><span class="p">;</span>
  <span class="k">height</span><span class="o">:</span> <span class="m">40px</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></figure>


<h2>Using Custom Elements in Markup</h2>

<p>Using a custom element is really straightforward thanks to the new <code>is</code> attribute. To use our new dropdown-button from above would just be:</p>

<figure class='code'><figcaption><span></span></figcaption><pre><code><span class="nt">&lt;button</span> <span class="na">is=</span><span class="s">&quot;x-dropdown-button&quot;</span><span class="nt">&gt;</span>Hey I&#39;m a dropdown!<span class="nt">&lt;/button&gt;</span>
</code></pre></figure>


<p>Easy, right?</p>

<p>You can also create custom element in script like so:</p>

<figure class='code'><figcaption><span></span></figcaption><pre><code><span class="kd">var</span> <span class="nx">btn</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;x-dropdown-button&quot;</span><span class="p">);</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">btn</span><span class="p">.</span><span class="nx">outerHTML</span><span class="p">);</span> <span class="c1">// will display &#39;&lt;button is=&quot;x-dropdown-button&quot;&gt;&lt;/button&gt;&#39;</span>
</code></pre></figure>


<p>Also you can specify a <code>constructor</code> attribute and then use it to create new instances of your element.</p>

<figure class='code'><figcaption><span></span></figcaption><pre><code><span class="nt">&lt;element</span> <span class="na">extends=</span><span class="s">&quot;button&quot;</span> <span class="na">name=</span><span class="s">&quot;x-dropdown-button&quot;</span> <span class="na">constructor=</span><span class="s">&quot;DropdownButton&quot;</span><span class="nt">&gt;</span>
  …
<span class="nt">&lt;/element&gt;</span>

var btn = new DropdownButton();
document.body.appendChild(b);
</code></pre></figure>


<p>Additionally you can add methods and properties to this constructor and call them later:</p>

<figure class='code'><figcaption><span></span></figcaption><pre><code><span class="nt">&lt;element</span> <span class="na">extends=</span><span class="s">&quot;button&quot;</span> <span class="na">name=</span><span class="s">&quot;x-dropdown-button&quot;</span> <span class="na">constructor=</span><span class="s">&quot;DropdownButton&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;script&gt;</span>
  <span class="nx">DropdownButton</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">open</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Hey I&#39;m open!&quot;</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">DropdownButton</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">close</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Aw dang I&#39;m closed...&quot;</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/element&gt;</span>

…

<span class="nt">&lt;script&gt;</span>
    <span class="kd">var</span> <span class="nx">btn</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DropdownButton</span><span class="p">();</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">btn</span><span class="p">);</span>
    <span class="nx">b</span><span class="p">.</span><span class="nx">open</span><span class="p">();</span> <span class="c1">// alerts &quot;Hey I&#39;m open!&quot;</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></figure>


<p>Constructors are attached to the <code>window</code> object, but if you don&#8217;t want to pollute that scope you can use the <code>generatedConstructor</code> property:</p>

<figure class='code'><figcaption><span></span></figcaption><pre><code><span class="nt">&lt;element</span> <span class="na">extends=</span><span class="s">&quot;table&quot;</span> <span class="na">name=</span><span class="s">&quot;x-chart&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;script&gt;</span>
    <span class="c1">// …</span>
    <span class="kd">var</span> <span class="nx">DropdownButton</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">generatedConstructor</span><span class="p">;</span>
    <span class="nx">DropdownButton</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">open</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">};</span>
    <span class="c1">// …</span>
  <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/element&gt;</span>
</code></pre></figure>


<h2>Support</h2>

<p>Unfortunately, at least to my knowledge, custom elements are not currently supported in any major browsers. However Chrome has added support for 2 of the 4 Web Components standards in their last two releases so I can&#8217;t help but think that custom elements are right around the corner. One thing I didn&#8217;t touch on very much in this post was shadow DOM which currently <strong>is</strong> supported in Chrome so tomorrow I&#8217;ll talk about that technology. Till then!</p>

<p>You should follow me on Twitter <a href="http://twitter.com/rob_dodson">here</a>.</p>

	</section>


  <footer class="post-footer">
  <section class="author">
    <h4>Rob Dodson</h4>
    <p></p>
  </section>
  <section class="share">
    <h4>Share this post</h4>
    <a class="icon-twitter" href="http://twitter.com/share?text=Introduction to Custom Elements&amp;url=http://robdodson.me/blog/2013/03/19/custom-elements-intro/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
      <span class="hidden">Twitter</span>
    </a>
    <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://robdodson.me/blog/2013/03/19/custom-elements-intro/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
      <span class="hidden">Facebook</span>
    </a>
    <a class="icon-google-plus" href="https://plus.google.com/share?url=http://robdodson.me/blog/2013/03/19/custom-elements-intro/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
      <span class="hidden">Google+</span>
    </a>
  </section>
</footer>
  <hr>
  
    <div class="share">
</div>

  
  
  <section id="comment">
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>
  
</article></main>
  <footer class="site-footer"><a class="subscribe icon-feed" href="http://robdodson.me/atom.xml"><span class="tooltip">Subscribe!</span></a>
<div class="inner">
  Follow me on <a href="http://twitter.com/rob_dodson" rel="me">Twitter</a>, <a rel="author" href="https://plus.google.com/118271135596408598424">Google+</a> or <a rel="me" href="http://github.com/robdodson">Github</a>
  <section class="copyright">All content copyright <a href="/">Rob Dodson</a> © 2013 • All rights reserved.</section>
  <section class="poweredby">Casper theme by <a class="icon-ghost" href="http://tryghost.org">Ghost</a> &amp; Published with <a href="http://octopress.org">Octopress</a></section>
</div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="//yandex.st/highlightjs/7.3/highlight.min.js"></script>  
<script>hljs.initHighlightingOnLoad()</script>


<script type="text/javascript">
      var disqus_shortname = 'robdodsontalksinternets';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://robdodson.me/blog/2013/03/19/custom-elements-intro/';
        var disqus_url = 'http://robdodson.me/blog/2013/03/19/custom-elements-intro/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-25869920-2']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


</body>
</html>
